## HarmonyOS å®æˆ˜å°é¡¹ç›®å¼€å‘ï¼ˆä¸€ï¼‰

## æ—¥å¸¸é€¼é€¼å¨

åœ¨ç»è¿‡ä¸€å‘¨å¤šçš„Harmonyos å¼€å‘åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ åï¼Œè‡ªå·±é€šè¿‡å¯¹äºHarmonyosåŸºç¡€çŸ¥è¯†çš„å­¦ä¹ ä¹‹åï¼Œç»“åˆè‡ªå·±çš„ä¸€äº›æƒ³æ³•ï¼Œç‹¬è‡ªå®Œæˆäº†åˆ©ç”¨Arktså¸ƒå±€çš„Harmonyos é¡¹ç›®ï¼Œåœ¨æ­¤å°†æ•´ä¸ªè¿‡ç¨‹ä¸å„ä½å…±äº«å‡ºæ¥ï¼Œå¦‚æœ‰ä¸€äº›é”™è¯¯ï¼Œå¸Œæœ›è§‚ä¼—è€çˆ·ä»¬æ‰¹è¯„æŒ‡æ­£ğŸ˜ƒğŸ˜ƒğŸ˜ƒ



## é¡¹ç›®ç®€è¿°

**ç»ƒæ‰‹é¡¹ç›®åç§°**ï¼šä¸ªäºº**mbtiæ€§æ ¼æµ‹è¯•**

**é¡¹ç›®èƒŒæ™¯**ï¼šç›¸ä¿¡å„ä½å°ä¼™ä¼´éƒ½æ¯”è¾ƒäº†è§£å‰æ®µæ—¶é—´å¾ˆç«çš„æ€§æ ¼æµ‹è¯•ï¼Œåœ¨ç»è¿‡æ¯”è¾ƒå¤šçš„ï¼ˆå¤§æ¦‚90å¤šé“é¢˜ç›®å§ï¼‰é¢˜ç›®æµ‹è¯•ä¹‹åï¼Œä¼šè·å–åˆ°å¯¹äºè‡ªå·±æ€§æ ¼çš„ä¸€äº›è¯´æ˜ï¼Œä½†æ˜¯æ¯”è¾ƒçƒ¦çš„æ˜¯ï¼Œåœ¨ä½ è‡ªå·±è®¤è®¤çœŸçœŸçš„ç­”å®Œ90å¤šé“é¢˜ç›®æƒ³è¦è¿›è¡Œç»“æœçš„æŸ¥çœ‹ï¼Œè¿™ä¸ªæ—¶å€™çªç„¶å¼¹å‡ºæ”¶è´¹....ç‹å¾·å‘ğŸ˜…ï¼Œè¿™è¿˜èƒ½ç»™ä½ æ”¶è´¹äº†ï¼Ÿ

åœ¨ç»è¿‡è¿™ä¸ªç—›è‹¦çš„è¿‡ç¨‹ä¹‹åï¼Œè‡ªå·±åœ¨ç½‘ç»œä¸Šæ”¶å–äº†ä¸€äº›å…³äºæ€§æ ¼æµ‹è¯•çš„é¢˜ç›®ï¼Œåœ¨ç†è§£äº†å…³äºæ€§æ ¼æµ‹è¯•çš„åŸç†ä¹‹åï¼Œç»“åˆè‡ªå·±å­¦ä¹ çš„å‰åç«¯çŸ¥è¯†ï¼Œè‡ªå·±åˆ¶ä½œäº†ä¸€ä¸ªæ€§æ ¼æµ‹è¯„ã€‚

**æ€§æ ¼æµ‹è¯•åŸç†åŠç»“æœè®¡ç®—æ–¹æ³•**

- é¦–å…ˆå‘¢ï¼Œæ€§æ ¼æµ‹è¯•çš„ç»“æœæ˜¯ç”±8é¡¹ï¼ˆ**Eã€Iã€Sã€Nã€Tã€Fã€Jã€P**ï¼‰ï¼ˆæ€§æ ¼æŒ‡æ ‡ï¼‰ç»„æˆçš„ï¼Œæ€§æ ¼æµ‹è¯•è¿‡ç¨‹ä¸­ä½ ä¼šæ‹¿åˆ°28ï¼ˆ98ã€æˆ–è€…æ›´å¤šï¼‰çš„æ€§æ ¼æµ‹è¯•é¢˜ç›®ï¼Œæ¯é“é¢˜ç›®åˆ†å€¼ä¸ºä¸€åˆ†ä¸”ä¸€èˆ¬ä¼šæœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œæ¯ä¸€ä¸ªé€‰é¡¹å¯¹åº”ä¸Šè¿°8ä¸ªæŒ‡æ ‡ä¸­çš„ä¸€ä¸ªï¼Œä¸åŒé¢˜ç›®ä¸åŒé€‰é¡¹å¯¹åº”çš„æŒ‡æ ‡ä¸ä¸€å®šä¸€è‡´ã€‚
- æ¯”å¦‚æœ‰ä¸¤é“æµ‹è¯•é¢˜ï¼Œæµ‹è¯•é¢˜1é€‰é¡¹aå¯¹åº”æŒ‡æ ‡Eï¼Œé€‰é¡¹bå¯¹åº”æŒ‡æ ‡Iï¼Œæµ‹è¯•é¢˜2é€‰é¡¹aå¯¹åº”æŒ‡æ ‡Jï¼Œé€‰é¡¹bå¯¹åº”æŒ‡æ ‡Pã€‚åŒæ—¶è¿™äº›æŒ‡æ ‡å¾€å¾€æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæ¯”å¦‚**â€œE-Iâ€ã€â€œS-Nâ€ã€â€œT-Fâ€**å’Œ**â€œJ-Pâ€**ï¼Œè¿™ä¸ªå«åšç»„åˆ«ã€‚
- åœ¨ç©å®¶å®Œæˆæ‰‹å¤´çš„é¢˜ç›®ä½œç­”ä¹‹åå‘¢ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç”±ä¸Šè¿°8é¡¹æŒ‡æ ‡ç»„æˆçš„åºåˆ—ï¼Œåœ¨è¯¥åºåˆ—ä¸­ï¼Œåªéœ€è¦åœ¨è¯¥åºåˆ—ä¸­æ‰¾åˆ°å¹¶æ¯”è¾ƒå››ä¸ªç»„åˆ«çš„å¾—åˆ†ã€‚æ¯ä¸ªç»„åˆ«ä¸­ï¼Œè·å¾—è¾ƒé«˜åˆ†æ•°çš„é‚£ä¸ªç±»å‹ï¼Œå°±æ˜¯ä½ çš„æ€§æ ¼ç±»å‹å€¾å‘ã€‚ä¾‹å¦‚ï¼šä½ çš„å¾—åˆ†æ˜¯ï¼š**E**ï¼ˆå¤–å‘ï¼‰12åˆ†ï¼Œ**I**ï¼ˆå†…å‘ï¼‰9åˆ†ï¼Œé‚£ä½ çš„ç±»å‹å€¾å‘ä¾¿æ˜¯**E**ï¼ˆå¤–å‘ï¼‰äº†ã€‚
- ä½†æ˜¯åœ¨åºåˆ—ä¸­ï¼Œå¯èƒ½å­˜åœ¨æŸä¸ªç»„åˆ«ä¸­ï¼Œä¸ªæ•°ä¸€è‡´çš„æƒ…å†µï¼ŒåŒåˆ†å¤„ç†è§„åˆ™ä¸ºï¼š
  å‡å¦‚E=I ------>  I
  å‡å¦‚S=N ------> N
  å‡å¦‚T=F ------>  F
  å‡å¦‚J=P ------> P

**é¡¹ç›®ç®€ä»‹**ï¼šé‡‡ç”¨å‰**åç«¯åˆ†ç¦»**çš„è®¾è®¡ï¼Œå‰ç«¯é‡‡ç”¨**Harmony os ArkTs** å£°æ˜å¼UI è®¾è®¡ï¼Œåç«¯é‡‡ç”¨**Spring-Boot+mongodb**(å½“ç„¶æ„Ÿå…´è¶£çš„ä¹Ÿå¯ä»¥è¯•è¯•mysqlç­‰å…¶ä»–æ•°æ®åº“) 

**ä¸»è¦èƒ½å­¦åˆ°ä»€ä¹ˆ**ï¼š

- å¯¹äºHarmony os çš„æ–°æ‰‹è€Œè¨€ï¼Œé€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„å¸®ä½ äº†è§£åˆ°ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š

  - åŸºç¡€çš„ä¸€äº›å¸ƒå±€ä»¥åŠåŸºç¡€çš„ä¸€äº›ç»„ä»¶ä½¿ç”¨

  - é¡µé¢è·³è½¬ï¼Œä¼ é€’å‚æ•°

  - ç½‘ç»œè¯·æ±‚

  - çˆ¶å­ç»„ä»¶ä¼ å€¼

  - æ‰“åŒ…å®‰è£…

  - <æš‚æ—¶æƒ³ä¸èµ·æ¥äº†ï¼Œç¬¦å·å ä½å…ˆ>

- å¯¹äºåç«¯çš„å°ä¼™ä¼´ä»¬è€Œè¨€

  - spring-booté›†æˆmongodbå®ç°æ•°æ®çš„å¢åˆ æ”¹æŸ¥
  - mongodb çš„ä¸€äº›è¯­å¥æ“ä½œ



é‚£è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬é©¬ä¸Šå¼€å§‹~

## åç«¯æ­å»º

### æ•°æ®åº“è®¾è®¡

- **æ•°æ®åº“é€‰æ‹©**
  
  - é¦–å…ˆæ•°æ®åº“çš„é€‰æ‹©æ–¹é¢å‘¢ï¼Œä¹‹å‰ä¸€ç›´ç”¨çš„mysqlï¼Œè¿™æ¬¡æ‰‹å¤´æœ‰ä¸€ä¸ªmongodb,æƒ³ç€æ¢æ¢å£å‘³ï¼Œå°±æš‚å®šå°†mongodbä½œä¸ºåç«¯æ•°æ®åº“ä½¿ç”¨ï¼Œä½œä¸ºæ•°æ®çš„å­˜å‚¨ã€‚
  
- æ•°æ®ç»“æ„æ¢³ç†
  - æ•°æ®ç»“æ„æ–¹é¢å¤§æ¦‚æœ‰ä¸¤ç§æ•°æ®éœ€è¦æˆ‘ä»¬è¿›è¡Œå­˜å‚¨
    - ç¬¬ä¸€ä¸ªå‘¢å°±æ˜¯é¢˜ç›®ï¼Œä½œä¸ºä¸€ä¸ªä¸ªäººçš„æ€§æ ¼æµ‹è¯•ï¼Œå½“ç„¶æ˜¯è¦å­˜åœ¨é¢˜ç›®è¿™ä¸€ä¸ªæ¦‚å¿µçš„
    
    - å…¶æ¬¡å‘¢å°±æ˜¯æµ‹è¯„ç»“æœå¯¹åº”çš„è¯´æ˜ï¼Œè¿™ä¸ªä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦çš„
    
      ç›®å‰æƒ³åˆ°çš„ä¹Ÿå°±è¿™ä¸¤ä¸ªï¼Œä¸å¤Ÿçš„è¯ï¼Œæˆ‘ä»¬åæœŸå†åŠ ï¼Œæˆ–è€…æœ‰å…¶ä»–æƒ³æ³•çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥è”ç³»æˆ‘è¿›è¡Œä¸€äº›äºŒæ¬¡å¼€å‘ğŸ¤—ğŸ¤—
  
- æ•°æ®è¡¨è®¾è®¡

  - æµ‹è¯•é¢˜ç›®è¡¨ï¼ˆmbtiTopicï¼‰

    - | _id             | String | mongodb å¯¹åº”çš„ä¸»é”®uuid |
      | --------------- | ------ | ---------------------- |
      | name            | String | é¢˜å¹²                   |
      | optionA         | String | é€‰é¡¹A                  |
      | optionB         | String | é€‰é¡¹B                  |
      | sequence_number | int    | é¢˜ç›®åºå·               |
      | valA            | String | é€‰é¡¹Aæ‰€å¯¹åº”çš„æ„ä¹‰      |
      | valB            | String | é€‰é¡¹Bæ‰€å¯¹åº”çš„æ„ä¹‰      |

  - ç»“æœå¯¹ç…§è¡¨

    - | _id             | String | mongodb å¯¹åº”çš„ä¸»é”®uuid |
      | --------------- | ------ | ---------------------- |
      | ansCode         | String | æ€§æ ¼æµ‹è¯•ç»“æœå­—ç¬¦ä¸²     |
      | ansDisc         | String | æ€§æ ¼æµ‹è¯•ç»“æœæè¿°       |
      | ansName         | String | æ€§æ ¼æµ‹è¯•ç»“æœåç§°       |
      | sequence_number | int    | åºå·                   |


### Spring-Booté¡¹ç›®åˆå§‹åŒ–

- å¯¹äºåç«¯çš„æ­å»ºï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„Spring-Bootçš„é¡¹ç›®ï¼Œé¦–å…ˆå‘¢å°±æ˜¯åˆå§‹åŒ–ä¸€ä¸ªSpring-Booté¡¹ç›®ï¼Œç»è¿‡ä¸€æ­¥ä¸€æ­¥çš„é€‰æ‹©ï¼Œæˆ‘ä»¬ä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªä»€ä¹ˆéƒ½æ²¡æœ‰çš„Spring-Booté¡¹ç›®

  - **ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„ideaåœ¨åˆå§‹åŒ–Spring-Booté¡¹ç›®çš„æ—¶å€™ï¼Œåªèƒ½é€‰æ‹©javaç‰ˆæœ¬ä¸º17å’Œ21ï¼Œä½†æ˜¯ä½ æƒ³ä½¿ç”¨java8æ—¶ï¼Œè¯·æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œ**

    ![image-20231212165012391](../staticImage/image-20231212165012391.png)

    - æˆ‘ä»¬åªçŸ¥é“IDEAé¡µé¢åˆ›å»ºSpringé¡¹ç›®ï¼Œå…¶å®æ˜¯è®¿é—®spring initializrå»åˆ›å»ºé¡¹ç›®ã€‚æ•…æˆ‘ä»¬å¯ä»¥é€šè¿‡é˜¿é‡Œäº‘å›½æœå»é—´æ¥åˆ›å»ºSpringé¡¹ç›®ã€‚å°†https://start.spring.io/æˆ–è€…http://start.springboot.io/æ›¿æ¢ä¸º https://start.aliyun.com/

    ![image-20231212165247123](../staticImage/image-20231212165247123.png)

- åˆ›å»ºå®Œæˆé¡¹ç›®ä¹‹åï¼Œéœ€è¦åœ¨pom.xmlä¸­è¿›è¡Œç›¸å…³ä¾èµ–çš„ å¼•å…¥(**æŒ‰éœ€å¯¼å…¥**)

```xml
<dependencies>
		<!--mongodb-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-mongodb</artifactId>
        </dependency>
        <!--springWeb-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
		<!--springdevtools-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-devtools</artifactId>
            <scope>runtime</scope>
            <optional>true</optional>
        </dependency>
    	<!--lombok-->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>
    	<!--springtest è¿™ä¸ªæ˜¯åˆå§‹åŒ–é¡¹ç›®è‡ªå¸¦çš„-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
        <!--fastjson -->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.48</version>
        </dependency>
        <!--æµ‹è¯•ç±»ï¼Œå¯ä»¥ä¸ç”¨å¼•å…¥-->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
		<!--æµ‹è¯•ç”¨åˆ°çš„æ•°æ®è§£æç±»ï¼Œå¯ä»¥ä¸ç”¨å¼•å…¥-->
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
        </dependency>
    </dependencies>
```



### åå°é¡¹ç›®ä»£ç ç¼–å†™

### ä»»åŠ¡ç‚¹åˆ†è§£

é‚£ä½œä¸ºä¸€ä¸ªæ•°æ®çš„æä¾›åå°ï¼Œéœ€è¦å®Œæˆä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š

- **å¯¹äºé¢˜ç›®çš„ç®¡ç†åŠŸèƒ½**ï¼ˆå‰é¢æƒ³ç€åšä¸€ä¸ªç›¸å…³é¢˜ç›®çš„ç®¡ç†ç•Œé¢ï¼Œå°±å†™äº†è¿™éƒ¨åˆ†æ¥å£ï¼Œä½†æ˜¯ç•Œé¢çœŸçš„ä¸æ˜¯å¾ˆæƒ³æ­å»ºï¼Œç•™ç»™çˆ±å­¦ä¹ çš„å°ä¼™ä¼´ä»¬æˆ–è€…åé¢æœ‰æ—¶é—´å†è¯´ï¼‰**ç›®å‰æ²¡å•¥ç”¨**
- **æŸ¥è¯¢é¢˜ç›®åŠŸèƒ½**
- **è®¡ç®—æ€§æ ¼å±æ€§åŠŸèƒ½**

æ—¢ç„¶ç›®æ ‡æ¯”è¾ƒæ˜ç¡®äº†ï¼Œè¾£ä¹ˆé—®é¢˜ä¹Ÿå°±å¥½åŠäº†èµ·æ¥ï¼

### Spring-Boot+mongodb CRUD

ä»¥ç¬¬ä¸€ç‚¹å¯¹äºé¢˜ç›®çš„ç®¡ç†åŠŸèƒ½ä¸ºä¾‹å­ï¼Œç®€å•è®²è¿°ä¸€ä¸‹Spring-Booté›†æˆmongodb è¿›è¡Œæ•°æ®çš„CRUD

- é¦–å…ˆï¼Œè¿›è¡Œspring-mongoçš„ä¾èµ–å¯¼å…¥ï¼Œè¯¦æƒ…è§ä¸Šæ–‡pom.xmlçš„ä¾èµ–ï¼ŒæŒ‰éœ€å¼•å…¥å³å¯
- è¿›è¡Œç®€å•çš„é¡¹ç›®ç›®å½•åˆ›å»ºï¼Œç®€å•çš„å¯¹äºé¡¹ç›®ç›®å½•è¿›è¡Œå¦‚ä¸‹æ¢³ç†
  - /confï¼šå­˜æ”¾ä¸€äº›é…ç½®æ–‡ä»¶
  - /controllerï¼š å­˜æ”¾æ¥å£
  - /daoï¼šå­˜æ”¾å¯¹åº”çš„å®ä½“ç±»
  - /serviceï¼šå­˜æ”¾ä¸€äº›serviceç±»
  - /service/serviceImplï¼šå­˜æ”¾å…·ä½“çš„serviceçš„é€»è¾‘å®ç°ç±»
  - /utilsï¼šå­˜æ”¾é€šå¸¸çš„å·¥å…·ç±»

![image-20231213154314836](../staticImage/image-20231213154314836.png)

- è¿›è¡Œapplication.ymlçš„é…ç½®

  ```yaml
  spring:
    data:
      mongodb:
        # ä¸»æœºåœ°å€
        host: 127.0.0.1
        # æ•°æ®åº“
        database: MBTI
        # mongodbç«¯å£
        port: 27017
    main:
      allow-circular-references: true
  server:
      port: 8899
  ```

- é¢˜ç›®å®ä½“ç±»(Topic)

  ```java
  /***
   *æ€§æ ¼æµ‹è¯•é¢˜ç›®ç±»
   */
  @Document("mbtiTopic") //è¡¨åç§°
  @Data
  @NoArgsConstructor
  @AllArgsConstructor
  public class Topic implements Serializable {
  
  
      @Id  //ä¸»é”®
      private String id;
  
      @Field  
      private String name;
  
      @Field
      private String optionA;
  
      @Field
      private String optionB;
  
  
      @Indexed(unique = true) //å”¯ä¸€ç´¢å¼•
      @Field("sequence_number")//å¯¹åº”mongoä¸­çš„å­—æ®µï¼Œå¦‚æœä¸å¯¹åº”ï¼Œéœ€è¦è¿›è¡Œæ ‡æ³¨
      private Integer sequenceNumber;
  
      @Field
      private String valA;
  
      @Field
      private String valB;
  }
  ```

- æ¥å£å®ç°

  - TopicService

  ```java
  public interface TopicService {
      //æŸ¥æ‰¾å…¨éƒ¨
      List<Topic> findAll();
  
      //æŒ‰ç…§idæŸ¥è¯¢
      Topic findById(int sequenceNumber);
  
      //æŒ‰ç…§id ä¿®æ”¹
      Topic updateById(Topic topic);
  
      //æŒ‰ç…§idåˆ é™¤
      boolean delById(int sequenceNumber);
  
      //æ’å…¥
      boolean insertOne(Topic topic);
  
  }
  ```

  - TopicServiceImpl

  ```java
  @Service
  public class TopicServiceImpl implements TopicService {
  
  
      @Autowired
      private MongoTemplate mongoTemplate;
  
      //æŸ¥å…¨éƒ¨
      @Override
      public List<Topic> findAll() {
          return mongoTemplate.findAll(Topic.class);
      }
  
      //æŸ¥æ ¹æ®idæŸ¥è¯¢
      @Override
      public Topic findById(int sequenceNumber) {
          Query query = new Query();
          query.addCriteria(Criteria.where("sequence_number").is(sequenceNumber));
          Topic one = mongoTemplate.findOne(query, Topic.class);
          return one;
      }
  
      //æ ¹æ®idæ›´æ–°
      @Override
      public Topic updateById(Topic topic) {
          Topic save = mongoTemplate.save(topic);
          return save;
      }
  	//æ ¹æ®idåˆ é™¤
      @Override
      public boolean delById(int sequenceNumber) {
          Query query = new Query();
          query.addCriteria(Criteria.where("sequence_number").is(sequenceNumber));
          DeleteResult remove = mongoTemplate.remove(query, Topic.class);
          if (remove.getDeletedCount() > 0) {
              return true;
          }
          return false;
      }
  
      //æ’å…¥
      @Override
      public boolean insertOne(Topic topic) {
          Topic save = mongoTemplate.save(topic);
          if (save != null) {
              return true;
          }
          return false;
      }
   }
  ```

  - controller

  ```java
  @RestController
  @CrossOrigin
  @RequestMapping("/manage")
  public class manageController {
  
      @Autowired
      private TopicService topicService;
      JSONObject jsonObject = new JSONObject();
  
  	//æŸ¥è¯¢å…¨éƒ¨
      @GetMapping("/getAll")
      public JSONObject getAll() {
          jsonObject.clear();
          jsonObject.put("status", 200);
          jsonObject.put("data", topicService.findAll());
          return jsonObject;
      }
  
      //æŒ‰ç…§idæŸ¥è¯¢
      @GetMapping("/getById/{id}")
      public JSONObject findById(@PathVariable("id") int id) {
          jsonObject.clear();
          Topic one = topicService.findById(id);
          if (one != null) {
              jsonObject.put("status", 200);
              jsonObject.put("data", one);
          } else {
              jsonObject.put("status", 200);
              jsonObject.put("data", null);
          }
          return jsonObject;
      }
  
      //æ›´æ–°
      @PutMapping("/update")
      public JSONObject updateById(@RequestBody Topic topic) {
          jsonObject.clear();
          Topic one = topicService.updateById(topic);
          if (one != null) {
              jsonObject.put("status", 200);
              jsonObject.put("msg", "æ›´æ–°æˆåŠŸ~");
          } else {
              jsonObject.put("status", 201);
              jsonObject.put("msg", "æ›´æ–°å¤±è´¥~");
          }
          return jsonObject;
      }
  
      //åˆ é™¤
      @GetMapping("/del/{id}")
      public JSONObject delById(@PathVariable("id") int id) {
          jsonObject.clear();
          boolean isDel = topicService.delById(id);
          if (isDel) {
              jsonObject.put("status", 200);
              jsonObject.put("msg", "åˆ é™¤æˆåŠŸ~");
          } else {
              jsonObject.put("status", 201);
              jsonObject.put("msg", "åˆ é™¤å¤±è´¥~");
          }
          return jsonObject;
      }
  
  }
  ```

### mongodbåˆ†é¡µæŸ¥è¯¢åŠŸèƒ½å®ç°

- serviceImpl

  ```java
  public static final int DEFAULT_CURR_PAGE = 1;//é»˜è®¤ç¬¬ä¸€é¡µ
  public static final int DEFAULT_PAGE_SIZE = 1;//é»˜è®¤æ¯é¡µ1æ¡
  
  
  
  public List<Topic> getListWithCriteria(int page, int pageSize) {
          Query query = new Query();
  
          // åˆ†é¡µæŸ¥è¯¢
          int Page = page < 0 ? PageParameter.DEFAULT_CURR_PAGE : page;
          int PageSize = pageSize < 0 ? PageParameter.DEFAULT_PAGE_SIZE : pageSize;
  
          //æ­¤å¤„ä¸ºç¬¬å‡ é¡µ,ä»ç¬¬å‡ æ¡å¼€å§‹æŸ¥,å…¬å¼å’Œsqlä¸€æ ·,æ ¹æ®ä¸šåŠ¡è‡ªè¡Œè®¾ç½®
          query.skip((Page - 1) * PageSize);
          //æ¯é¡µæ¡æ•°
          query.limit(PageSize);
          //è°ƒç”¨find(),æŸ¥å‡ºç¬¦åˆæ¡ä»¶çš„æ•°æ®
          List<Topic> topics = mongoTemplate.find(query, Topic.class);
          return topics;
  
      }
  ```

- controller

  ```java
  //åˆ†é¡µæŸ¥è¯¢
  @GetMapping("/getByPage/{page},{size}")
      public Object getByPage(@PathVariable("page") int page, @PathVariable("size") int size) {
          jsonObject.clear();
          List<Topic> listWithCriteria = topicService.getListWithCriteria(page, size);
          int size1 = listWithCriteria.size();
          if (size1 > 0) {
              jsonObject.put("status", 200);
              jsonObject.put("data", listWithCriteria);
              jsonObject.put("endTag", false);
          } else {
              jsonObject.put("status", "201");
              jsonObject.put("data", null);
              jsonObject.put("endTag", true);
          }
          return jsonObject;
      }
  ```

### è®¡ç®—æ€§æ ¼å±æ€§åŠŸèƒ½å®ç°

**æ€è·¯**ï¼šç”¨æˆ·åœ¨ç§»åŠ¨ç«¯ç­”é¢˜å®Œæˆåå°†æ‰€æœ‰å·²é€‰æ‹©é¢˜ç›®çš„æ€§æ ¼æŒ‡æ ‡æ‹¼æ¥æˆä¸€ä¸ªæŒ‡æ ‡å­—ç¬¦ä¸²æäº¤ç»™åç«¯ï¼Œåç«¯é€šè¿‡éå†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºå„ä¸ªæŒ‡æ ‡çš„æ•°é‡ï¼Œå¯¹åº”å››ä¸ªæ€§æ ¼ç»„åˆ«**â€œE-Iâ€ã€â€œS-Nâ€ã€â€œT-Fâ€**å’Œ**â€œJ-Pâ€** ï¼ŒæŒ‰ç…§å‰é¢æ‰€å†™çš„è¯„åˆ†æ ‡å‡†è¿›è¡Œæ€§æ ¼æµ‹è¯•çš„ç»“æœè®¡ç®—ã€‚è®¡ç®—å®Œæˆä¹‹åï¼Œè¿”å›ç»™ç§»åŠ¨ç«¯è¿›è¡Œæ¸²æŸ“å±•ç¤º

- serviceImpl

  ```java
  public AnsReturn calculateAns(String string) {
          StringBuffer stringBuffer = new StringBuffer(string);
          HashMap<Character, Integer> map = new HashMap<>();
  
          for (int i = 0; i < stringBuffer.length(); i++) {
              char a = stringBuffer.charAt(i);
              if (map.get(a) == null) {
                  map.put(a, 1);
              } else {
                  map.put(a, map.get(a) + 1);
              }
          }
          System.out.println(map.keySet());
          System.out.println(map.values());
  
          Integer e = (map.get('E') == null ? 0 : map.get('E'));
          Integer i = (map.get('I') == null ? 0 : map.get('I'));
          Integer s = (map.get('S') == null ? 0 : map.get('S'));
          Integer n = (map.get('N') == null ? 0 : map.get('N'));
          Integer t = (map.get('T') == null ? 0 : map.get('T'));
          Integer f = (map.get('F') == null ? 0 : map.get('F'));
          Integer j = (map.get('J') == null ? 0 : map.get('J'));
          Integer p = (map.get('P') == null ? 0 : map.get('P'));
  
  
          //è®¡ç®—æ¯”ç‡
          DecimalFormat decimalFormat = new DecimalFormat("0.00");
          String eRate = decimalFormat.format(((double) e / stringBuffer.length()) * 100);
          String iRate = decimalFormat.format(((double) i / stringBuffer.length()) * 100);
          String sRate = decimalFormat.format(((double) s / stringBuffer.length()) * 100);
          String nRate = decimalFormat.format(((double) n / stringBuffer.length()) * 100);
          String tRate = decimalFormat.format(((double) t / stringBuffer.length()) * 100);
          String fRate = decimalFormat.format(((double) f / stringBuffer.length()) * 100);
          String jRate = decimalFormat.format(((double) j / stringBuffer.length()) * 100);
          String pRate = decimalFormat.format(((double) p / stringBuffer.length()) * 100);
  
          //æ‹¼æ¥ç»“æœ
          StringBuffer res = new StringBuffer();
          res = e > i ? res.append("E") : res.append('I');
          res = s > n ? res.append('S') : res.append('N');
          res = t > f ? res.append('T') : res.append('F');
          res = j > p ? res.append('J') : res.append('P');
  
  
          Query query = new Query();
          query.addCriteria(Criteria.where("ansCode").is(res.toString()));//ä»å­—å…¸è¡¨ä¸­è·å–æ€§æ ¼ç»“æœä¿¡æ¯
          AnsBasic one = mongoTemplate.findOne(query, AnsBasic.class);
  
          AnsReturn ans = new AnsReturn(res.toString(), eRate, iRate, sRate, nRate, tRate, fRate, jRate, pRate, one.getName(), one.getDisc());
  
          return ans;
      }
  ```

- controller

  ```java
   @PostMapping("/submit")
      public JSONObject calculateAns(@RequestBody JSONObject object) {
          jsonObject.clear();
          String ans = object.getString("ans");
          AnsReturn ans1 = topicService.calculateAns(ans);
          if (ans1 != null) {
              jsonObject.put("status", 200);
              jsonObject.put("data", ans1);
          } else {
              jsonObject.put("status", 201);
              jsonObject.put("data", null);
          }
          return jsonObject;
  
      }
  ```

  è‡³æ­¤ç®€å•çš„åç«¯ä»£ç å·²ç»å…¨éƒ¨å¼€å‘å®Œæˆï¼Œæä¾›ç»™ç§»åŠ¨ç«¯è®¿é—®çš„æ¥å£æœ‰ï¼šæŸ¥è¯¢æ‰€æœ‰çš„é¢˜ç›®ï¼Œæäº¤è‡ªå·±çš„ç»“æœç­‰å¾…è¿”å›æ€§æ ¼æµ‹è¯•ç»“æœ
  


## ç»“è¯­

å…³äºé¡¹ç›®ä»‹ç»ä»¥åŠç®€å•çš„ç«¯é¡¹ç›®æ­å»ºå°±å…ˆç®€å•çš„ä»‹ç»åˆ°è¿™é‡Œï¼Œæœ‰å…³ç§»åŠ¨ç«¯çš„ç•Œé¢éƒ¨ç½²ç­‰ï¼Œæˆ‘ä»¬ä¸‹æœŸå†èŠï¼Œå¦‚æœè§‰å¾—upæ‰€è¿°å¯¹ä½ çš„å­¦ä¹ ç­‰æœ‰ç‚¹å¸®åŠ©ï¼Œè¯·åŠ¡å¿…ç•™ä¸‹ä½ ä»¬çš„ä¸€é”®ä¸‰è¿ï¼Œè°¢è°¢å„ä½è§‚ä¼—è€çˆ·äº†ã€‚ğŸ¤—ğŸ¤—

## INVITATION

ä¸»è¦æ˜¯å¯¹äºHarmonyOS çš„ç§»åŠ¨ç«¯å¼€å‘åŸºç¡€çŸ¥è¯†çš„å·©å›ºï¼Œæ‰€ä»¥æ•´ä½“ç»“æ„ç­‰éƒ½æ¯”è¾ƒç®€å•ï¼Œå°±å½“ç»ƒæ‰‹äº†å§ï¼Œé¡¹ç›®å·²ç»å¼€æºï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åŠ å…¥è¿›è¡Œåç»­çš„å¼€å‘.

åç«¯ï¼š[hompğŸŒ](https://gitee.com/jerrylau213/homp)

å¸Œæœ›æœ‰å…´è¶£çš„å°ä¼™ä¼´åŠ å…¥ä¸€èµ·ï¼Œæˆ‘ä»¬åšå¤§åšå¼ºï¼Œå†åˆ›è¾‰ç…ŒğŸ˜‡ğŸ˜‡ğŸ˜‡
