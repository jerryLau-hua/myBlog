# è®¾è®¡æ¨¡å¼æµ…æ(å) Â·è®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨|ç»„åˆæ¨¡å¼

## æ—¥å¸¸å¨é€¼å¨

javaè®¾è®¡æ¨¡å¼æµ…æï¼Œå¦‚æœè§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—ä¸€é”®ä¸‰è¿ï¼Œè°¢è°¢å„ä½è§‚ä¼—è€çˆ·ğŸ˜ğŸ˜


## æ¡ˆä¾‹

> æœ‰ä¸¤å®¶é—¨åº—ï¼Œé—¨åº—Aå‘¢åªæä¾›æ—©é¤ï¼Œé—¨åº—Bå‘¢åªæä¾›åˆé¤ï¼Œæœ‰ä¸€å¤©è¿™ä¸¤å®¶åº—é“ºæƒ³è¦è¿›è¡Œåˆå¹¶ï¼Œä¸€èµ·åšå¤§åšå¼ºï¼Œå†åˆ›è¾‰ç…Œã€‚
>
> åˆå¹¶åå‘¢ï¼Œå¯¹äºèœå•çš„å®šåˆ¶å­˜åœ¨äº†ä¸€å®šçš„é—®é¢˜ï¼š
>
> é—¨åº—Açš„èœå•é‡‡ç”¨äº†ArrayListè¿›è¡Œå­˜å‚¨ï¼Œä½†æ˜¯é—¨åº—Bçš„èœå•ä¹‹å‰æ˜¯é‡‡ç”¨äº†æ•°ç»„è¿›è¡Œå­˜å‚¨ï¼Œé‚£ä¹ˆåœ¨åˆå¹¶ä¹‹åï¼Œå¯¹äºæœåŠ¡å‘˜æ¥è¯´ï¼Œæ€ä¹ˆæ‰èƒ½å°†èœå•å±•ç¤ºå‡ºæ¥ï¼Œæ˜¯ä¸€ä»¶æ¯”è¾ƒå¤´ç–¼çš„äº‹æƒ…

æ—§çš„é—¨åº—Açš„èœå•æ„æˆ:

```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 14:37
 * @æ³¨é‡Š Aé¤é¦†çš„é¦…é¥¼èœå•
 */
public class PanCakeMenu {
    private ArrayList menuItems;

    public PanCakeMenu() {
        menuItems = new ArrayList<>();

        addItem("K&B PanCake", "PanCake with eggs and beef", true, 18.0);
        addItem("normal PanCake", "PanCake with eggs", true, 10.0);
        addItem("blueberry PanCake", "PanCake with blue and cheese", false, 13.0);
    }

    private void addItem(String name, String disc, boolean vegetarian, double price) {

        menuItems.add(new MenuItem(name, disc, vegetarian, price));

    }
    public ArrayList getMenuItems() {
        return menuItems;
    }
}
```

æ—§çš„é—¨åº—Bçš„èœå•ç»„æˆï¼š

```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 14:37
 * @æ³¨é‡Š Bé¤é¦†çš„åˆé¤èœå•
 */
public class LunchMenu {
    static final Integer MAX_VALUE = 3;
    int index = 0;
    private MenuItem[] menuItems;

    public LunchMenu() {
        menuItems = new MenuItem[MAX_VALUE];

        addItem("single lunch", "hot dog with coke", true, 18.0);
        addItem("soup", "soup with cake for lunch", true, 19.0);
        addItem("Tomato and egg rice bowl", "rice with Tomato and egg for lunch", true, 21.0);
    }

    private void addItem(String name, String disc, boolean vegetarian, double price) {
        if (menuItems.length > MAX_VALUE) {
            System.out.println("menu is full, not allowed to insert !");
        } else {
            menuItems[index] = new MenuItem(name, disc, vegetarian, price);
            index++;
        }
    }

  public MenuItem[] getMenuItems() {
        return menuItems;
   }
   
}
```

é‚£ä¹ˆå¯¹äºæœåŠ¡å‘˜æ¥è¯´ï¼Œåœ¨åˆå¹¶é—¨åº—ä¹‹åï¼Œå¦‚æœå®ç°ç®€å•çš„èœå•ç»„åˆï¼ŒæœåŠ¡å‘˜ä»£ç å¯èƒ½å¦‚ä¸‹ï¼š

```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 15:01
 * @æ³¨é‡Š åˆå¹¶åçš„Bé¤å…çš„waiter
 */
public class Waiter {
    private PanCakeMenu panCakeMenu;
    private LunchMenu lunchMenu;

    public Waiter(PanCakeMenu panCakeMenu, LunchMenu lunchMenu) {
        this.panCakeMenu = panCakeMenu;
        this.lunchMenu = lunchMenu;
    }

    public void showMenu() {
        //å±•ç¤ºèœå•
        ArrayList menuItems = panCakeMenu.getMenuItems();
        MenuItem[] menuItems1 = lunchMenu.getMenuItems();

        for (int i = 0; i < menuItems.size(); i++) {
            MenuItem a = (MenuItem) menuItems.get(i);
            System.out.println(a.toString());
        }

        for (int i = 0; i < menuItems1.length; i++) {
            MenuItem MenuItem = menuItems1[i];
            System.out.println(MenuItem.toString());
        }
    }

}
```

> è¿è¡Œç»“æœï¼š
> 
> breakfast-
> MenuItem{name='K&B PanCake', disc='PanCake with eggs and beef', vegetarian=true, price=18.0}
> MenuItem{name='normal PanCake', disc='PanCake with eggs', vegetarian=true, price=10.0}
>MenuItem{name='blueberry PanCake', disc='PanCake with blue and cheese', vegetarian=false, price=13.0}
> lunch-
> MenuItem{name='single lunch', disc='hot dog with coke', vegetarian=true, price=18.0}
> MenuItem{name='soup', disc='soup with cake for lunch', vegetarian=true, price=19.0}
> MenuItem{name='Tomato and egg rice bowl', disc='rice with Tomato and egg for lunch', vegetarian=true, price=21.0}eese 13.0  


è™½ç„¶å‘¢ï¼Œå¯¹äºæœåŠ¡å‘˜æ¥è¯´ï¼Œè²Œä¼¼å®ç°äº†è¿™ä¸ª`showmenu()`è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœåæœŸå†åŠ å…¥ä¸€ä¸ªé—¨åº—ï¼Œæ˜¯ä¸æ˜¯åˆå¾—å†™ä¸€ä¸ªå¾ªç¯å»è¿›è¡Œç¬¬ä¸‰å®¶é—¨åº—èœå•çš„éå†ï¼Ÿ

é‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•è¿›è¡Œä¼˜åŒ–ä¸€äº›å‘¢ï¼Ÿ

æˆ‘ä»¬æ¥è¿›è¡Œåˆ†æä¸€ä¸‹ï¼š

1. è¦éå†æ—©é¤é¡¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨**ArrayList**çš„`size()`å’Œ`get()`æ–¹æ³•

2. è¦éå†åˆé¤é¡¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨**æ•°ç»„**çš„`length`å­—æ®µå’Œä¸­æ‹¬å·`[]`

3. ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå°†å®ƒç§°ä¸ºè¿­ä»£å™¨(**Iterator**)ï¼Œåˆ©ç”¨å®ƒæ¥å°è£…â€œéå†é›†åˆå†…çš„æ¯ä¸ªå¯¹è±¡çš„è¿‡ç¨‹â€ã€‚å…ˆè®©æˆ‘ä»¬åœ¨ArrayListä¸Šè¯•è¯•:

```java
Iterator iterator1 = panCakeMenu.createIterator();
while (iterator1.hasNext()) {
	System.out.println(iterator1.next().toString());
 }
```
4. ç„¶ååœ¨æ•°ç»„ä¸Šè¯•ä¸€è¯•ï¼š

```java
MealIterator iterator = lunchMenu.createIterator();
while (iterator.hasNext()){
    	System.out.println(iterator.next().toString());
}
```
é‚£ä¹ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª**MealIterator**è¿­ä»£å™¨ï¼Œæš‚æ—¶ä¸º**lunchMenu**æœåŠ¡
```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 15:11
 * @æ³¨é‡Š MealIterator
 */
public class MealIterator implements Iterator {
    private MenuItem[] menuItems;
    private int index = 0;

    public MealIterator(MenuItem[] menuItems) {
        this.menuItems = menuItems;
    }

    @Override
    public boolean hasNext() {
        if (menuItems.length <= index||menuItems[index]==null) {
            return false;
        } else
            return true;
    }

    @Override
    public Object next() {

        MenuItem menuItem = menuItems[index];
        index++;
        return menuItem;
    }

    @Override
    public void remove() {
        if (index < 0) {
            throw new IllegalArgumentException("list is emptyï¼Œno element can be removed !");
        }
        if (menuItems[index - 1] != null) {
            for (int i = index - 1; i < (menuItems.length - 1); i++) {
                menuItems[i] = menuItems[i + 1];
            }
            menuItems[index - 1] = null;
        }

    }
}
```

ä½¿ç”¨ä¸Šè¿°çš„è¿­ä»£å™¨ï¼Œé‡æ„èœå•
```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 14:37
 * @æ³¨é‡Š Bé¤é¦†çš„åˆé¤èœå•
 */
public class LunchMenu {
    static final Integer MAX_VALUE = 5;
    int index = 0;
    private MenuItem[] menuItems;

    public LunchMenu() {
        menuItems = new MenuItem[MAX_VALUE];
        addItem("single lunch", "hot dog with coke", true, 18.0);
        addItem("soup", "soup with cake for lunch", true, 19.0);
        addItem("Tomato and egg rice bowl", "rice with Tomato and egg for lunch", true, 21.0);
    }

    private void addItem(String name, String disc, boolean vegetarian, double price) {
        if (menuItems.length > MAX_VALUE) {
            System.out.println("menu is full, not allowed to insert !");
        } else {
            menuItems[index] = new MenuItem(name, disc, vegetarian, price);
            index++;
        }
    }
    public MealIterator createIterator() {
        return new MealIterator(menuItems);
    }
}
```

ç›¸åº”çš„ï¼ŒæœåŠ¡å‘˜ç±»ä¹Ÿè¿›è¡Œé‡æ„
```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 15:01
 * @æ³¨é‡Š åˆå¹¶åçš„Bé¤å…çš„waiter
 */
public class Waiter {
    private PanCakeMenu panCakeMenu;
    private LunchMenu lunchMenu;

    public Waiter(PanCakeMenu panCakeMenu, LunchMenu lunchMenu) {
        this.panCakeMenu = panCakeMenu;
        this.lunchMenu = lunchMenu;
    }

    public void showMenu() {
        //å±•ç¤ºèœå•

        Iterator iterator1 = panCakeMenu.createIterator();
        MealIterator iterator = lunchMenu.createIterator();
        System.out.println("breakfast-");
        showMenu(iterator1);
        System.out.println("lunch-");
        showMenu(iterator);
    }

    public void showMenu(Iterator iterator) {
        while (iterator.hasNext()) {
            System.out.println(iterator.next().toString());
        }
    }
}
```

è¿™ä¸ªé€‰ä»£å™¨è®©æœåŠ¡å‘˜èƒ½å¤Ÿä»å…·ä½“ç±»çš„å®ç°ä¸­è§£è€¦ã€‚å¥¹ä¸éœ€è¦çŸ¥é“èœå•æ˜¯ä½¿ç”¨æ•°ç»„ã€ArrayListï¼Œè¿˜æ˜¯ä¾¿åˆ©è´´æ¥å®ç°ã€‚å¥¹åªå…³å¿ƒå¥¹èƒ½å¤Ÿå–å¾—é€‰ä»£å™¨ã€‚

ä½†æ˜¯å¯¹äºæœåŠ¡å‘˜æ¥è¯´ï¼Œä»–è¿˜æŒæœ‰ä¸¤ä¸ªæ¥å£çš„å…·ä½“å®ç°ç±»ï¼Œæœ‰ç‚¹è¿èƒŒäº†æˆ‘ä»¬é¢å‘æ¥å£ç¼–ç¨‹è€Œä¸æ˜¯é¢å‘æ¥å£çš„å®ç°ç¼–ç¨‹è¿™ä¸€åŸåˆ™ï¼Œæˆ‘ä»¬åœ¨é‡æ„ä¸€ä¸‹ä»£ç ã€‚

- åˆ›å»º**Menu**æ¥å£
```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 14:37
 * @æ³¨é‡Š menu å…¬å…±æ¥å£
 */
public interface Menu {
    Iterator createIterator();
}
```

- è®©**PanCakeMenu**å’Œ**LunchMenu**å®ç°æ¥å£
```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 14:37
 * @æ³¨é‡Š Bé¤é¦†çš„åˆé¤èœå•
 */
public class LunchMenu implements Menu{
    static final Integer MAX_VALUE = 5;
    int index = 0;
    private MenuItem[] menuItems;

    public LunchMenu() {
        menuItems = new MenuItem[MAX_VALUE];

        addItem("single lunch", "hot dog with coke", true, 18.0);
        addItem("soup", "soup with cake for lunch", true, 19.0);
        addItem("Tomato and egg rice bowl", "rice with Tomato and egg for lunch", true, 21.0);
    }

    private void addItem(String name, String disc, boolean vegetarian, double price) {
        if (menuItems.length > MAX_VALUE) {
            System.out.println("menu is full, not allowed to insert !");
        } else {
            menuItems[index] = new MenuItem(name, disc, vegetarian, price);
            index++;
        }
    }

    public Iterator createIterator() {
        return new MealIterator(menuItems);
    }
}
```

- è®©æœåŠ¡å‘˜æŒæœ‰æ¥å£**Menu**

```java
/**
 * @version 1.0
 * @Author jerryLau
 * @Date 2024/2/29 15:01
 * @æ³¨é‡Š åˆå¹¶åçš„Bé¤å…çš„waiter
 */
public class Waiter {
    private Menu panCakeMenu;
    private Menu lunchMenu;

    public Waiter(Menu panCakeMenu, Menu lunchMenu) {
        this.panCakeMenu = panCakeMenu;
        this.lunchMenu = lunchMenu;
    }

    public void showMenu() {
        //å±•ç¤ºèœå•
        Iterator iterator1 = panCakeMenu.createIterator();
        Iterator iterator = lunchMenu.createIterator();
        System.out.println("breakfast-");
        showMenu(iterator1);
        System.out.println("lunch-");
        showMenu(iterator);
    }

    public void showMenu(Iterator iterator) {
        while (iterator.hasNext()) {
            System.out.println(iterator.next().toString());
        }
    }
}
```
ä½ å¯èƒ½ä¼šå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä½¿ç”¨Javaçš„Iteratoræ¥å£å‘¢--æˆ‘ä»¬ä¹‹æ‰€ä»¥è¿™ä¹ˆåšï¼Œæ˜¯ä¸ºäº†è¦è®©ä½ äº†è§£å¦‚ä½•ä»å¤´åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ã€‚ç°åœ¨ç›®çš„è¾¾åˆ°äº†ï¼Œå¦‚æœå†æœ‰åº—é“ºåˆå¹¶ï¼Œå¯ä»¥ä½¿ç”¨javaçš„Iteratoræ¥å£ã€‚

## è¿­ä»£å™¨æ¨¡å¼

**Javaè®¾è®¡æ¨¡å¼ä¸­çš„è¿­ä»£å™¨æ¨¡å¼ä»‹ç»**

è¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹æ³•æ¥é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œæ— éœ€çŸ¥é“æˆ–æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚åœ¨Javaä¸­ï¼Œè¿­ä»£å™¨æ¨¡å¼æ˜¯é€šè¿‡`java.util.Iterator`æ¥å£æ¥å®ç°çš„ã€‚

### **å…ƒç´ **

è¿­ä»£å™¨æ¨¡å¼æ¶‰åŠä»¥ä¸‹å‡ ä¸ªä¸»è¦çš„å…ƒç´ ï¼š

1. **è¿­ä»£å™¨ï¼ˆIteratorï¼‰**ï¼šè¿™æ˜¯ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†è®¿é—®å’Œéå†èšåˆå¯¹è±¡ä¸­çš„å…ƒç´ çš„æ–¹æ³•ã€‚åœ¨Javaä¸­ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªåä¸º`iterator()`çš„æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªå®ç°äº†`Iterator`æ¥å£çš„å¯¹è±¡ã€‚
2. **å…·ä½“è¿­ä»£å™¨ï¼ˆConcreteIteratorï¼‰**ï¼šè¿™æ˜¯è¿­ä»£å™¨æ¥å£çš„å…·ä½“å®ç°ã€‚å®ƒè´Ÿè´£éå†èšåˆå¯¹è±¡ä¸­çš„å…ƒç´ ï¼Œå¹¶æä¾›äº†è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ›´å¤šå…ƒç´ ç­‰æ–¹æ³•ã€‚
3. **èšåˆï¼ˆAggregateï¼‰**ï¼šè¿™æ˜¯ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡çš„æ–¹æ³•ã€‚åœ¨Javaä¸­ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªåä¸º`iterator()`çš„æ–¹æ³•ã€‚
4. **å…·ä½“èšåˆï¼ˆConcreteAggregateï¼‰**ï¼šè¿™æ˜¯èšåˆæ¥å£çš„å…·ä½“å®ç°ã€‚å®ƒå®ç°äº†åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸èšåˆå¯¹è±¡ç›¸å…³è”çš„å…·ä½“è¿­ä»£å™¨ã€‚

### **ä¼˜ç¼ºç‚¹**

#### **ä¼˜ç‚¹**ï¼š

1. **ç®€åŒ–éå†**ï¼šè¿­ä»£å™¨æ¨¡å¼æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥éå†èšåˆå¯¹è±¡ä¸­çš„å…ƒç´ ï¼Œè€Œæ— éœ€äº†è§£èšåˆå¯¹è±¡çš„åº•å±‚è¡¨ç¤ºã€‚
2. **å¤šç§éå†æ–¹å¼**ï¼šé€šè¿‡å®ç°ä¸åŒçš„è¿­ä»£å™¨ç±»ï¼Œå¯ä»¥ä¸ºåŒä¸€ä¸ªèšåˆå¯¹è±¡æä¾›å¤šç§éå†æ–¹å¼ã€‚
3. **å°è£…æ€§**ï¼šä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼ï¼Œå®¢æˆ·ç«¯ä»£ç åªéœ€è¦çŸ¥é“å¦‚ä½•ä½¿ç”¨è¿­ä»£å™¨ï¼Œè€Œæ— éœ€å…³å¿ƒèšåˆå¯¹è±¡çš„å†…éƒ¨å®ç°ã€‚

#### **ç¼ºç‚¹**ï¼š

1. **å¢åŠ ç±»çš„æ•°é‡**ï¼šç”±äºè¿­ä»£å™¨æ¨¡å¼å°†å­˜å‚¨æ•°æ®å’Œéå†æ•°æ®çš„èŒè´£åˆ†ç¦»ï¼Œæ¯ä¸ªèšåˆç±»å¯èƒ½éœ€è¦å¯¹åº”ä¸€ä¸ªè¿­ä»£å™¨ç±»ï¼Œè¿™å¯èƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚
2. **éå†æ•ˆç‡**ï¼šå¯¹äºç®€å•çš„èšåˆå¯¹è±¡ï¼ˆå¦‚æ•°ç»„æˆ–æœ‰åºåˆ—è¡¨ï¼‰ï¼Œä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œéå†å¯èƒ½æ¯”ç›´æ¥è®¿é—®å…ƒç´ æ›´åŠ ç¹çå’Œæ•ˆç‡ä½ä¸‹ã€‚

### **é€‚ç”¨åœºæ™¯**

è¿­ä»£å™¨æ¨¡å¼é€šå¸¸é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

1. éœ€è¦éå†èšåˆå¯¹è±¡çš„åœºæ™¯ï¼Œè€Œåˆä¸å¸Œæœ›å®¢æˆ·ç«¯ä»£ç äº†è§£èšåˆå¯¹è±¡çš„åº•å±‚è¡¨ç¤ºã€‚
2. éœ€è¦ä¸ºèšåˆå¯¹è±¡æä¾›å¤šç§éå†æ–¹å¼çš„åœºæ™¯ã€‚
3. éœ€è¦ç»Ÿä¸€éå†æ¥å£çš„åœºæ™¯ï¼Œä»¥ç®€åŒ–å®¢æˆ·ç«¯ä»£ç ã€‚
4. åœ¨Javaä¸­ï¼Œ`java.util.Iterator` æ¥å£å°±æ˜¯è¿­ä»£å™¨æ¨¡å¼çš„å®ç°ã€‚å½“ä½ æœ‰ä¸€ä¸ªé›†åˆï¼ˆå¦‚ `List`ã€`Set` ç­‰ï¼‰å¹¶æƒ³è¦éå†å…¶ä¸­çš„å…ƒç´ æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨ã€‚



> æ­£å½“æˆ‘ä»¬è§‰å¾—è¿™æ ·å¾ˆå‘¨å…¨æ—¶ï¼Œçªç„¶åˆæœ‰ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œåº—å®¶Bæƒ³åœ¨åˆé¤çš„èœå•ä¸­æ·»åŠ ä¸€ç§åˆåç”œç‚¹çš„â€œå­èœå•â€
>
> å¦‚æœæˆ‘ä»¬èƒ½è®©ç”œç‚¹èœå•å˜æˆé¤å…èœå•é›†åˆçš„ä¸€ä¸ªå…ƒç´ ï¼Œé‚£è¯¥æœ‰å¤šå¥½ã€‚ä½†æ˜¯æ ¹æ®ç°åœ¨çš„å®ç°ï¼Œæ ¹æœ¬åšä¸åˆ°ã€‚
>
> ä¸Šè¿°éœ€æ±‚ç±»ä¼¼äºè¿™æ ·ï¼š

![](./01.jpg)

é‚£ä¹ˆæˆ‘ä»¬ä¸å¾—ä¸è€ƒè™‘ç”¨ä¸€äº›æ–°çš„è®¾è®¡ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è¡¨ç°èœå•ã€åµŒå¥—å­èœå•å’Œèœå•é¡¹ï¼Œæˆ‘ä»¬å¾ˆè‡ªç„¶åœ°é‡‡ç”¨æ ‘å½¢ç»“æ„ä»¥ä¾¿ç¬¦åˆè¿™æ ·çš„éœ€æ±‚

> æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬çš„æ–°è®¾è®¡ä¸­ï¼ŒçœŸæ­£éœ€è¦äº›ä»€ä¹ˆå‘¢?
> æˆ‘ä»¬éœ€è¦æŸç§æ ‘å½¢ç»“æ„ï¼Œå¯ä»¥å®¹çº³èœå•ã€å­èœå•å’Œèœå•é¡¹ã€‚
> æˆ‘ä»¬éœ€è¦ç¡®å®šèƒ½å¤Ÿåœ¨æ¯ä¸ªèœå•çš„å„ä¸ªé¡¹ä¹‹é—´æ¸¸èµ°ï¼Œè€Œä¸”è‡³å°‘è¦åƒç°åœ¨ç”¨è¿­ä»£å™¨ä¸€æ ·æ–¹ä¾¿ã€‚
> æˆ‘ä»¬ä¹Ÿéœ€è¦èƒ½å¤Ÿæ›´æœ‰å¼¹æ€§åœ°åœ¨èœå•é¡¹ä¹‹é—´æ¸¸èµ°ã€‚æ¯”æ–¹è¯´ï¼Œå¯èƒ½åªéœ€è¦éå†ç”œç‚¹èœå•ï¼Œæˆ–è€…å¯ä»¥éå†é¤å…çš„æ•´ä¸ªèœå•(åŒ…æ‹¬ç”œç‚¹èœå•åœ¨å†…)

æ²¡é”™ï¼Œæˆ‘ä»¬è¦ä»‹ç»å¦ä¸€ä¸ªæ¨¡å¼è§£å†³è¿™ä¸ªéš¾é¢˜ã€‚æˆ‘ä»¬å¹¶æ²¡æœ‰æ”¾å¼ƒè¿­ä»£å™¨--å®ƒä»ç„¶æ˜¯æˆ‘ä»¬è§£å†³æ–¹æ¡ˆä¸­çš„ä¸€éƒ¨åˆ†--ç„¶è€Œï¼Œç®¡ç†èœå•çš„é—®é¢˜å·²ç»åˆ°äº†ä¸€ä¸ªè¿­ä»£å™¨æ— æ³•è§£å†³çš„æ–°ç»´åº¦ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†å€’é€€å‡ æ­¥ï¼Œæ”¹ç”¨ç»„åˆæ¨¡å¼(Composite Pattern)æ¥å®ç°è¿™ä¸€éƒ¨åˆ†ã€‚
å¯¹äºè¿™ä¸ªæ¨¡å¼ï¼Œæˆ‘ä»¬ä¸æ‰“ç®—æ·±å…¥æ¢è®¨ï¼Œåªåœ¨è¿™é‡Œæå‡ºå®ƒçš„æ­£å¼å®šä¹‰:

## ç»„åˆæ¨¡å¼

**å®šä¹‰ï¼š**ç»„åˆæ¨¡å¼å…è®¸ä½ å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç°â€œæ•´ä½“/éƒ¨åˆ†â€å±‚æ¬¡ç»“æ„ã€‚ç»„åˆèƒ½è®©å®¢æˆ·ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†ä¸ªåˆ«å¯¹è±¡ä»¥åŠå¯¹è±¡ç»„åˆã€‚

**ç±»å›¾**ï¼š

![image-20240407134623241](./02.png)

æˆ‘ä»¬è¦å¦‚ä½•åœ¨èœå•ä¸Šåº”ç”¨ç»„åˆæ¨¡å¼å‘¢?ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç»„ä»¶æ¥å£æ¥ä½œä¸ºèœå•å’Œèœå•é¡¹çš„å…±åŒæ¥å£ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿç”¨ç»Ÿä¸€çš„åšæ³•æ¥å¤„ç†èœå•å’Œèœå•é¡¹ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹èœå•æˆ–èœå•é¡¹è°ƒç”¨ç›¸åŒçš„æ–¹æ³•ã€‚

é¦–å…ˆå¯ä»¥åˆ›å»ºèœå•ç»„ä»¶

```java
public abstract class MenuComponent {
    //æ“ä½œ range start
    public void add(MenuComponent menuComponent) {
        throw new UnsupportedOperationException();
    }

    public void remove(MenuComponent menuComponent) {
        throw new UnsupportedOperationException();
    }

    public MenuComponent getChild(int i) {
        throw new UnsupportedOperationException();
    }
    //æ“ä½œ range end

    //åŸºæœ¬å±æ€§ range start
    public String getName() {
        throw new UnsupportedOperationException();
    }

    public String getDescription() {
        throw new UnsupportedOperationException();
    }

    public double getPrice() {
        throw new UnsupportedOperationException();
    }

    public boolean isVegetarian() {
        throw new UnsupportedOperationException();
    }

    public void print() {
        throw new UnsupportedOperationException();
    }
    //åŸºæœ¬å±æ€§ range end
}
```

ç„¶ååˆ›å»ºèœå•é¡¹ç»§æ‰¿èœå•ç»„ä»¶

```java
public class MenuItem extends MenuComponent {
    private String name;
    private String description;
    private double price;
    private boolean isVegetarian;

    public MenuItem(String name, String description, double price, boolean isVegetarian) {
        this.name = name;
        this.description = description;
        this.price = price;
        this.isVegetarian = isVegetarian;
    }

    @Override
    public String getName() {
        return name;
    }

    @Override
    public String getDescription() {
        return description;
    }

    @Override
    public double getPrice() {
        return price;
    }

    @Override
    public boolean isVegetarian() {
        return isVegetarian;
    }

    @Override
    public void print() {
        System.out.println(" " + getName() + (isVegetarian() ? "(N)" : "(Y)") + " " + getDescription() + " " + getPrice() + " ");
    }
}

```

åŒæ ·åˆ›å»ºèœå•ï¼Œä¹Ÿæ˜¯ç»§æ‰¿è‡ªèœå•ç»„ä»¶

```java
public class Menu extends MenuComponent {
    List<MenuComponent> menuComponents = new ArrayList<MenuComponent>();
    private String name;
    private String description;


    public Menu(String name, String description) {
        this.name = name;
        this.description = description;

    }

    @Override
    public void add(MenuComponent menuComponent) {
        menuComponents.add(menuComponent);
    }

    @Override
    public void remove(MenuComponent menuComponent) {
        menuComponents.remove(menuComponent);
    }

    @Override
    public MenuComponent getChild(int i) {
        return menuComponents.get(i);
    }

    @Override
    public String getName() {
        return name;
    }

    @Override
    public String getDescription() {
        return description;
    }


    @Override
    public void print() {
        System.out.println(" " + getName()+" " + getDescription());
        System.out.println("---------------------------");

        Iterator<MenuComponent> iterator = menuComponents.iterator();
        while (iterator.hasNext()) {
            MenuComponent next = iterator.next();
            next.print();
        }


    }
}
```

é‚£ä¹ˆå¯¹äºæœåŠ¡å‘˜æ¥è¯´ï¼Œå¯ä»¥è¿›è¡Œä»¥ä¸‹ä¿®æ”¹

```java
public class Waiter {
    MenuComponent allMenus;

    public Waiter(MenuComponent allMenus) {
        this.allMenus = allMenus;
    }

    public void printMenu() {
        allMenus.print();
    }
}
```

åˆ›å»ºæµ‹è¯•ç±»

```java
public class MenuTestDriver {
    public static void main(String[] args) {
        MenuComponent menuComponentA = new Menu("PANCAKE HOUSE MENU", "Breakfast");
        MenuComponent menuComponentB = new Menu("LUNCH MENU", "Lunch");
        MenuComponent innerMenu = new Menu("LUNCH inner MENU", "Dessert of Lunch ");
        MenuComponent allMenus = new Menu("ALL MENUS", "All menus combined");

        allMenus.add(menuComponentA);
        allMenus.add(menuComponentB);

        menuComponentB.add(new MenuItem("è›‹ç‚’é¥­", "è›‹ç‚’é¥­ï¼šç±³é¥­ï¼Œé¸¡è›‹", 15.0, false));
        menuComponentB.add(innerMenu);
        innerMenu.add(new MenuItem("ç”œç‚¹", "é¥­åç”œç‚¹", 1.5, true));
        innerMenu.add(new MenuItem("æ°´æœ", "é¥­åæ°´æœ", 5.0, true));

        Waiter waiter = new Waiter(allMenus);
        waiter.printMenu();

    }

}
```

è¿è¡Œç»“æœ

![image-20240407145355586](./03.png)

è‡³æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡äº†ç»„åˆæ¨¡å¼ï¼Œå®ç°äº†èœå•çš„ç®¡ç†

ä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥æ€»ç»“ä»¥ä¸‹ç»„åˆæ¨¡å¼ç›¸å…³çš„å†…å®¹

### å…ƒç´ 

ç»„åˆæ¨¡å¼ä¸»è¦åŒ…å«ä¸‰ä¸ªè¦ç´ ï¼š

1. **æŠ½è±¡æ ¹èŠ‚ç‚¹ï¼ˆComponentï¼‰**ï¼šå®šä¹‰ç³»ç»Ÿå„å±‚æ¬¡å¯¹è±¡çš„å…±æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œå¯ä»¥é¢„å…ˆå®šä¹‰ä¸€äº›é»˜è®¤è¡Œä¸ºå’Œå±æ€§ã€‚åœ¨æŠ½è±¡æ ¹èŠ‚ç‚¹ä¸­ï¼Œé€šå¸¸ä¼šå®šä¹‰è®¿é—®åŠç®¡ç†å…¶å­æ„ä»¶çš„æ–¹æ³•ï¼Œå¦‚å¢åŠ å­èŠ‚ç‚¹ã€åˆ é™¤å­èŠ‚ç‚¹ã€è·å–å­èŠ‚ç‚¹ç­‰ã€‚
2. **å¶å­èŠ‚ç‚¹ï¼ˆLeafï¼‰**ï¼šå¶å­èŠ‚ç‚¹å¯¹è±¡ï¼Œå…¶ä¸‹å†æ— åˆ†æ”¯ï¼Œæ˜¯ç³»ç»Ÿå±‚æ¬¡éå†çš„æœ€å°å•ä½ã€‚åœ¨ç»„åˆç»“æ„ä¸­ï¼Œå¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®ƒå®ç°äº†åœ¨æŠ½è±¡æ ¹èŠ‚ç‚¹ä¸­å®šä¹‰çš„è¡Œä¸ºã€‚
3. **æ ‘æèŠ‚ç‚¹ï¼ˆCompositeï¼‰**ï¼šå®šä¹‰æ ‘æèŠ‚ç‚¹çš„è¡Œä¸ºï¼Œå­˜å‚¨å­èŠ‚ç‚¹ï¼Œç»„åˆæ ‘æèŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹å½¢æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚æ ‘æèŠ‚ç‚¹å¯ä»¥åŒ…å«æ ‘æèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥åŒ…å«å¶å­èŠ‚ç‚¹ï¼Œå®ƒå…¶ä¸­æœ‰ä¸€ä¸ªé›†åˆå¯ä»¥ç”¨äºå­˜å‚¨å­èŠ‚ç‚¹ï¼Œå®ç°äº†åœ¨æŠ½è±¡æ ¹èŠ‚ç‚¹ä¸­å®šä¹‰çš„è¡Œä¸ºã€‚åœ¨å…¶ä¸šåŠ¡æ–¹æ³•ä¸­å¯ä»¥é€’å½’è°ƒç”¨å…¶å­èŠ‚ç‚¹çš„ä¸šåŠ¡æ–¹æ³•ã€‚

### ä¼˜ç¼ºç‚¹

ç»„åˆæ¨¡å¼çš„ä¼˜ç‚¹ä¸»è¦æœ‰ï¼š

- **ç®€åŒ–å®¢æˆ·ç«¯ä»£ç **ï¼šç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¸€è‡´åœ°å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ï¼Œæ— é¡»å…³å¿ƒè‡ªå·±å¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯ç»„åˆå¯¹è±¡ã€‚
- **å¢åŠ æ–°çš„æ„ä»¶æ–¹ä¾¿**ï¼šåœ¨ç»„åˆä½“å†…åŠ å…¥æ–°çš„å¯¹è±¡å¾ˆå®¹æ˜“ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå› ä¸ºåŠ å…¥äº†æ–°çš„å¯¹è±¡è€Œæ›´æ”¹æºä»£ç ã€‚
- **å¼€é—­åŸåˆ™**ï¼šç»„åˆæ¨¡å¼ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚
- **çµæ´»çš„è§£å†³æ–¹æ¡ˆ**ï¼šä¸ºæ ‘å½¢ç»“æ„çš„é¢å‘å¯¹è±¡å®ç°æä¾›äº†ä¸€ç§çµæ´»çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å¶å­å¯¹è±¡å’Œå®¹å™¨å¯¹è±¡çš„é€’å½’ç»„åˆå¯ä»¥å½¢æˆå¤æ‚çš„æ ‘å½¢æœºæ„ï¼Œä½†å¯¹æ ‘å½¢ç»“æ„çš„æ§åˆ¶å´å¾ˆç®€å•ã€‚

ç„¶è€Œï¼Œç»„åˆæ¨¡å¼ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼š

- **è¿åä¾èµ–å€’ç½®åŸåˆ™**ï¼šåœ¨ä½¿ç”¨ç»„åˆæ¨¡å¼æ—¶ï¼Œå…¶å¶å­å’Œæ ‘æçš„å£°æ˜éƒ½æ˜¯å®ç°ç±»ï¼Œè€Œä¸æ˜¯æ¥å£ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ã€‚
- **è®¾è®¡è¾ƒå¤æ‚**ï¼šå®¢æˆ·ç«¯éœ€è¦èŠ±æ›´å¤šæ—¶é—´ç†æ¸…ç±»ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ã€‚
- **ä¸å®¹æ˜“é™åˆ¶å®¹å™¨ä¸­çš„æ„ä»¶**ï¼šåœ¨ç»„åˆæ¨¡å¼ä¸­ï¼Œä¸å®¹æ˜“é™åˆ¶å®¹å™¨ä¸­å¯ä»¥åŒ…å«çš„æ„ä»¶ç±»å‹ã€‚

---

ä»£ç ç›¸å…³ä»£ç å¯ä»¥å‚è€ƒ **[ä»£ç ä»“åº“ğŸŒ](https://gitee.com/jerrylau213/DesignPatterns)**

**psï¼šæœ¬æ–‡åŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„**

---